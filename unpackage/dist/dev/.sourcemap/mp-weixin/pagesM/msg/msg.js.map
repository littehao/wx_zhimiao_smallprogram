{"version":3,"sources":["webpack:////Users/huhao/Desktop/www/wx_zhimiao/pagesM/msg/msg.vue?42cb","webpack:////Users/huhao/Desktop/www/wx_zhimiao/pagesM/msg/msg.vue?1112","webpack:////Users/huhao/Desktop/www/wx_zhimiao/pagesM/msg/msg.vue?9fdf","webpack:////Users/huhao/Desktop/www/wx_zhimiao/pagesM/msg/msg.vue?54bf","uni-app:///pagesM/msg/msg.vue","webpack:////Users/huhao/Desktop/www/wx_zhimiao/pagesM/msg/msg.vue?701a","webpack:////Users/huhao/Desktop/www/wx_zhimiao/pagesM/msg/msg.vue?0434"],"names":["data","clearMsgModal","showLogin","currentTab","msgType","tabs","name","mescroll","upOption","onScroll","textNoMore","auto","noMoreSize","page","num","size","empty","use","textLoading","toTop","safearea","bottom","downOption","conversationList","msgList","unreadNum","deleteConversationModal","systemMsg","computed","watch","isSDKReady","created","methods","selCommunicationListFn","pageNum","pageSize","type","originatorUserId","conversations","getConversationList","uni","console","customClick","deleteConversationFn","pinConversationFn","conversationID","isPinned","onConversationListUpdated","tranMessage","changeTab","comfirmFn","promise","mescrollInit","scrollFn","downCallback","setTimeout","upCallback","navToNotice","url","navToChat"],"mappings":";;;;;;;;;;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAgH;AAChH;AACuD;AACL;AACc;;;AAGhE;AACgN;AAChN,gBAAgB,iNAAU;AAC1B,EAAE,yEAAM;AACR,EAAE,8EAAM;AACR,EAAE,uFAAe;AACjB;AACA;AACA;AACA;AACA;AACA,EAAE,kFAAU;AACZ;AACA;;AAEA;AACe,gF;;;;;;;;;;;;ACvBf;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;;;;;;;;;;;;;ACAA;AAAA;AAAA;AAAA;AAAA;AAAA;AACA;AACA;AACA;AACA,aAAa,oPAEN;AACP,KAAK;AACL;AACA,aAAa,wLAEN;AACP,KAAK;AACL;AACA,aAAa,iVAEN;AACP,KAAK;AACL;AACA,aAAa,gNAEN;AACP,KAAK;AACL;AACA,aAAa,0MAEN;AACP,KAAK;AACL;AACA,aAAa,8LAEN;AACP,KAAK;AACL;AACA,aAAa,sKAEN;AACP,KAAK;AACL;AACA,CAAC;AACD;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,GAAG;AACH;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,SAAS;AACT;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,MAAM;AACN;AACA;AACA;AACA,OAAO;AACP;AACA;AACA;AACA;AACA;AACA;;;;;;;;;;;;;;ACtGA;AAAA;AAAA;AAAA;AAAi0B,CAAgB,iyBAAG,EAAC,C;;;;;;;;;;;;;;;;;;;;ACiGr1B;AAAA;AAAA;AAAA,eACA;EACAA;IACA;MACAC;MACAC;MACAC;MACAC;MACAC,OACA;QAAAC;MAAA,GACA;QAAAA;MAAA,GACA;QAAAA;MAAA,EACA;MACAC;MACAC;QACAC;QACAC;QACAC;QACAC;QACAC;UACAC;UACAC;QACA;;QACAC;UACAC;QACA;QACAC;QACAC;UACAC;UACAC;QACA;MACA;MACAC;QACAX;MACA;MACAY;MACAC;MACAC;MAAA;MACAC;MAAA;MACAC;IAEA;EACA;;EACAC,4BACA,iFACA;EACAC;IACAC;MAAA;MACA;QACA;MACA;IACA;EACA;EACAC;IACA;EACA;EACAC,yCACA;IACAC;MAAA;MACA;QACA;UACAC;UACAC;UACAC;QACA;QACA;QACA;UACA;UACA;UACA;UACA;YAAA;UAAA;UACA;UACA;UACA;UACAC;YACA;cACA;YACA;YACA;cACAC;YACA;UACA;UACA;UACA;UACA;QACA;MACA;QACA;QACA;MACA;IACA;IACAC;MAAA;MAAA;MACAC;MACAA;QACAC;QACA;QACA;QACA;UAAA;QAAA;QACA;QACA;QACA;UACA3B;QACA;QACA;QACA2B;QACA;UAAA;QAAA;QAEA;MACA;QACA;MACA;IACA;IACAC;MAAA;MACAD;MACA;QAAA;QACA;QACA;MACA;QAAA;QACA;MACA;IACA;IACAE;MAAA;MACAH;QACA;QACA;QACA;QACA;MACA;IACA;IACAI;MAAA;MAAA;MACAJ;QAAAK;QAAAC;MAAA;QACAL;QACA;UACA;QACA;UACA;QACA;MACA;IACA;IACAM;MAAA;MACA;MACA;IACA;IACAC;MAAA;MACA;QACA;MACA;QACA;MACA;IACA;IACAC;MACA;MACA;MACA;QACA;QACA;MACA;QACA;QACA;MACA;QACA;MACA;IACA;IACAC;MAAA;MAAA;MACA;MACA;MACAC;QACA;QACA;QACA;MACA;QACA;QACA;QACAV;MACA;IACA;IACAW;MACA;IACA;IACAC;MACA;IACA;IACAC;MAAA;MACAC;QACA;MACA;IACA;IACAC;MAAA;MACA;QACA;MACA;QACA;MACA;IACA;IACAC;MACAjB;QACAkB;MACA;IACA;IACAC;MACAlB;MACAD;QACAkB;MACA;IACA;EAAA;AAEA;AAAA,2B;;;;;;;;;;;;;AC/SA;AAAA;AAAA;AAAA;AAAgiD,CAAgB,g6CAAG,EAAC,C;;;;;;;;;;;ACApjD;AACA,OAAO,KAAU,EAAE,kBAKd","file":"pagesM/msg/msg.js","sourcesContent":["import { render, staticRenderFns, recyclableRender, components } from \"./msg.vue?vue&type=template&id=12515f7b&\"\nvar renderjs\nimport script from \"./msg.vue?vue&type=script&lang=js&\"\nexport * from \"./msg.vue?vue&type=script&lang=js&\"\nimport style0 from \"./msg.vue?vue&type=style&index=0&lang=scss&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../../../../../../Applications/HBuilderX.app/Contents/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  null,\n  null,\n  false,\n  components,\n  renderjs\n)\n\ncomponent.options.__file = \"pagesM/msg/msg.vue\"\nexport default component.exports","export * from \"-!../../../../../../../Applications/HBuilderX.app/Contents/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/vue-loader/lib/loaders/templateLoader.js??vue-loader-options!../../../../../../../Applications/HBuilderX.app/Contents/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/webpack-preprocess-loader/index.js??ref--16-0!../../../../../../../Applications/HBuilderX.app/Contents/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/webpack-uni-mp-loader/lib/template.js!../../../../../../../Applications/HBuilderX.app/Contents/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/webpack-uni-app-loader/page-meta.js!../../../../../../../Applications/HBuilderX.app/Contents/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/vue-loader/lib/index.js??vue-loader-options!../../../../../../../Applications/HBuilderX.app/Contents/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/webpack-uni-mp-loader/lib/style.js!./msg.vue?vue&type=template&id=12515f7b&\"","var components\ntry {\n  components = {\n    comheader: function () {\n      return import(\n        /* webpackChunkName: \"components/comheader/comheader\" */ \"@/components/comheader/comheader.vue\"\n      )\n    },\n    tuiTabs: function () {\n      return import(\n        /* webpackChunkName: \"components/tui-tabs/tui-tabs\" */ \"@/components/tui-tabs/tui-tabs.vue\"\n      )\n    },\n    mescrollUni: function () {\n      return import(\n        /* webpackChunkName: \"uni_modules/mescroll-uni/components/mescroll-uni/mescroll-uni\" */ \"@/uni_modules/mescroll-uni/components/mescroll-uni/mescroll-uni.vue\"\n      )\n    },\n    msg: function () {\n      return import(\n        /* webpackChunkName: \"components/msg/msg\" */ \"@/components/msg/msg.vue\"\n      )\n    },\n    tuiNoData: function () {\n      return import(\n        /* webpackChunkName: \"components/tui-no-data/tui-no-data\" */ \"@/components/tui-no-data/tui-no-data.vue\"\n      )\n    },\n    tuiModal: function () {\n      return import(\n        /* webpackChunkName: \"components/tui-modal/tui-modal\" */ \"@/components/tui-modal/tui-modal.vue\"\n      )\n    },\n    login: function () {\n      return import(\n        /* webpackChunkName: \"components/login/login\" */ \"@/components/login/login.vue\"\n      )\n    },\n  }\n} catch (e) {\n  if (\n    e.message.indexOf(\"Cannot find module\") !== -1 &&\n    e.message.indexOf(\".vue\") !== -1\n  ) {\n    console.error(e.message)\n    console.error(\"1. 排查组件名称拼写是否正确\")\n    console.error(\n      \"2. 排查组件是否符合 easycom 规范，文档：https://uniapp.dcloud.net.cn/collocation/pages?id=easycom\"\n    )\n    console.error(\n      \"3. 若组件不符合 easycom 规范，需手动引入，并在 components 中注册该组件\"\n    )\n  } else {\n    throw e\n  }\n}\nvar render = function () {\n  var _vm = this\n  var _h = _vm.$createElement\n  var _c = _vm._self._c || _h\n  var l0 =\n    _vm.getIsLogin && _vm.msgList.length > 0\n      ? _vm.__map(_vm.msgList, function (item, __i0__) {\n          var $orig = _vm.__get_orig(item)\n          var m0 =\n            item.conversationID != \"C2Cadministrator\"\n              ? item.lastMessage && _vm.tranMessage(item.lastMessage)\n              : null\n          return {\n            $orig: $orig,\n            m0: m0,\n          }\n        })\n      : null\n  if (!_vm._isMounted) {\n    _vm.e0 = function ($event) {\n      _vm.clearMsgModal = true\n    }\n    _vm.e1 = function ($event) {\n      _vm.showLogin = true\n    }\n    _vm.e2 = function ($event) {\n      _vm.deleteConversationModal = false\n    }\n    _vm.e3 = function ($event) {\n      _vm.clearMsgModal = false\n    }\n    _vm.e4 = function ($event) {\n      _vm.showLogin = false\n    }\n  }\n  _vm.$mp.data = Object.assign(\n    {},\n    {\n      $root: {\n        l0: l0,\n      },\n    }\n  )\n}\nvar recyclableRender = false\nvar staticRenderFns = []\nrender._withStripped = true\n\nexport { render, staticRenderFns, recyclableRender, components }","import mod from \"-!../../../../../../../Applications/HBuilderX.app/Contents/HBuilderX/plugins/uniapp-cli/node_modules/babel-loader/lib/index.js!../../../../../../../Applications/HBuilderX.app/Contents/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/webpack-preprocess-loader/index.js??ref--12-1!../../../../../../../Applications/HBuilderX.app/Contents/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/webpack-uni-mp-loader/lib/script.js!../../../../../../../Applications/HBuilderX.app/Contents/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/vue-loader/lib/index.js??vue-loader-options!../../../../../../../Applications/HBuilderX.app/Contents/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/webpack-uni-mp-loader/lib/style.js!./msg.vue?vue&type=script&lang=js&\"; export default mod; export * from \"-!../../../../../../../Applications/HBuilderX.app/Contents/HBuilderX/plugins/uniapp-cli/node_modules/babel-loader/lib/index.js!../../../../../../../Applications/HBuilderX.app/Contents/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/webpack-preprocess-loader/index.js??ref--12-1!../../../../../../../Applications/HBuilderX.app/Contents/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/webpack-uni-mp-loader/lib/script.js!../../../../../../../Applications/HBuilderX.app/Contents/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/vue-loader/lib/index.js??vue-loader-options!../../../../../../../Applications/HBuilderX.app/Contents/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/webpack-uni-mp-loader/lib/style.js!./msg.vue?vue&type=script&lang=js&\"","<template>\n\t<view class=\"msg-page h-100vh flex flex-column bgF7F8FA\">\n\t\t<comheader :backBtn=\"false\" title=\"群聊\"></comheader>\t\n\t\t<template v-if=\"getIsLogin\">\n\t\t\t<view class=\"flex align-center  justify-between border-bottom bgffff\">\n\t\t\t\t<tui-tabs unlined :width=\"220\" :tabs=\"tabs\" :padding=\"0\" \n\t\t\t\tsliderBgColor=\"#F85241\" selectedColor=\"#F85241\" color=\"#4E5969\" itemWidth=\"33%\" \n\t\t\t\t:currentTab=\"currentTab\" @change=\"changeTab\">\n\t\t\t\t</tui-tabs>\n\t\t\t\t<view class=\"fs-24 ft86909C flex align-center pr-3\" @tap=\"clearMsgModal = true\">\n\t\t\t\t\t<image class=\"mr-1\" src=\"/static/images/clearmsg.png\" mode=\"widthFix\" style=\"width: 16px;height: 16px;\"></image>清除未读\n\t\t\t\t</view>\n\t\t\t</view>\n\t\t\t<view class=\"flex-1 msg-scroll\">\n\t\t\t\t<mescroll-uni ref=\"mescrollRef\" :fixed=\"false\" @init=\"mescrollInit\" @down=\"downCallback\" @up=\"upCallback\"\n\t\t\t\t\t:down=\"downOption\" :up=\"upOption\" @scroll=\"scrollFn\" >\n\t\t\t\t\t<template v-if=\"currentTab == 0\">\n\t\t\t\t\t\t<!--通知消息-->\n\t\t\t\t\t\t<template v-if=\"systemMsg\">\n\t\t\t\t\t\t\t<msg :topNotice=\"true\" :forbid=\"true\" @click=\"navToNotice\" :msgContent=\"systemMsg.lastMessage && systemMsg.lastMessage.payload.description || '系统消息'\"></msg>\n\t\t\t\t\t\t\t<view class=\"mb-3\"></view>\n\t\t\t\t\t\t</template>\n\t\t\t\t\t</template>\n\t\t\t\t\t\n\t\t\t\t\t<!--会话消息-->\n\t\t\t\t\t<template v-if=\"msgList.length > 0\">\n\t\t\t\t\t\t<block v-for=\"item in msgList\" :key=\"item.conversationID\">\n\t\t\t\t\t\t\t<template v-if=\"item.conversationID != 'C2Cadministrator'\">\n\t\t\t\t\t\t\t\t<msg\n\t\t\t\t\t\t\t\t:msgTitle=\"item.userProfile && item.userProfile.nick\" \n\t\t\t\t\t\t\t\t:top=\"item.isPinned\" \n\t\t\t\t\t\t\t\t:msgContent=\"item.lastMessage && tranMessage(item.lastMessage)\" \n\t\t\t\t\t\t\t\t:msgNum=\"item.unreadCount\" \n\t\t\t\t\t\t\t\t:conversationID=\"item.conversationID\"\n\t\t\t\t\t\t\t\t:isPinned=\"item.isPinned\"\n\t\t\t\t\t\t\t\t:avatar=\"item.userProfile && item.userProfile.avatar\"\n\t\t\t\t\t\t\t\t:msgTime=\"item.lastMessage.lastTime\"\n\t\t\t\t\t\t\t\t@customClick=\"customClick\"\n\t\t\t\t\t\t\t\t@click=\"navToChat(item)\">\n\t\t\t\t\t\t\t\t</msg>\n\t\t\t\t\t\t\t</template>\n\t\t\t\t\t\t</block>\n\t\t\t\t\t</template>\n\t\t\t\t\t<template v-if=\"currentTab != 0 && msgList.length == 0 && systemMsg\">\n\t\t\t\t\t\t<tui-no-data :fixed=\"false\" :imgUrl=\"`https://zm.zgzhm.com/mini/img/img_nodata.png`\" :marginBottom=\"0\" :imgWidth=\"300\" :imgHeight=\"300\">\n\t\t\t\t\t\t\t<text class=\"fs-28\">暂无数据</text>\n\t\t\t\t\t\t</tui-no-data>\n\t\t\t\t\t</template>\n\t\t\t\t\t<template v-if=\"msgList.length == 0 && !systemMsg\">\n\t\t\t\t\t\t<tui-no-data :fixed=\"false\" :imgUrl=\"`https://zm.zgzhm.com/mini/img/img_nodata.png`\" :marginBottom=\"0\" :imgWidth=\"300\" :imgHeight=\"300\">\n\t\t\t\t\t\t\t<text class=\"fs-28\">暂无数据</text>\n\t\t\t\t\t\t</tui-no-data>\n\t\t\t\t\t</template>\n\t\t\t\t</mescroll-uni>\n\t\t\t</view>\n\t\t</template>\n\t\t<template v-else>\n\t\t\t<tui-no-data :imgUrl=\"`https://zm.zgzhm.com/mini/img/img_nodata.png`\" btnText=\"去登录\" backgroundColor=\"#F85241\" :marginBottom=\"0\" :imgWidth=\"300\" :imgHeight=\"300\" @click=\"showLogin = true\">\n\t\t\t\t<text class=\"fs-28\">登录后查看信息</text>\n\t\t\t</tui-no-data>\n\t\t</template>\n\t\t<!--删除会话-->\n\t\t<tui-modal\n\t\t\t:show=\"deleteConversationModal\"  \n\t\t\tcustom\n\t\t\tpadding=\"0\"\n\t\t>\n\t\t\t<view class=\"flex flex-column\">\n\t\t\t\t<view class=\"flex justify-center align-center fs-32 ft000000\" style=\"height: 60px;\">确认删除该会话吗？</view>\n\t\t\t\t<view class=\"fs-28 ft86909C text-center pb-5\">删除会话后将会清空聊天记录</view>\n\t\t\t\t<view class=\"flex align-center border-top\" style=\"height: 56px;\">\n\t\t\t\t\t<view class=\"flex align-center justify-center ft000000 fs-28 flex-1 h-100\" @click=\"deleteConversationModal = false\">取消</view>\n\t\t\t\t\t<view class=\"flex align-center justify-center ftF85241 fs-28 border-left flex-1 h-100\"  @click=\"deleteConversationFn\">确定</view>\n\t\t\t\t</view>\n\t\t\t</view>\n\t\t</tui-modal>\n\t\t\n\t\t<!--清空搜索历史-->\n\t\t<tui-modal \n\t\t\t:show=\"clearMsgModal\"  \n\t\t\tcustom\n\t\t\tpadding=\"0\"\n\t\t>\n\t\t\t<view class=\"flex flex-column\">\n\t\t\t\t<view class=\"flex justify-center align-center fs-32 ft000000\" style=\"height: 88px;\">确认清空未读消息吗？</view>\n\t\t\t\t<view class=\"flex align-center border-top\" style=\"height: 56px;\">\n\t\t\t\t\t<view class=\"flex align-center justify-center ft000000 fs-28 flex-1 h-100\" @click=\"clearMsgModal = false\">取消</view>\n\t\t\t\t\t<view class=\"flex align-center justify-center ftF85241 fs-28 border-left flex-1 h-100\"  @click=\"comfirmFn\">确定</view>\n\t\t\t\t</view>\n\t\t\t</view>\n\t\t</tui-modal>\n\t\t\n\t\t<login :modal=\"showLogin\" @hide=\"showLogin = false\"></login>\n\t</view>\n</template>\n\n<script>\n\timport { mapGetters,mapActions } from 'vuex'\n\texport default {\n\t\tdata() {\n\t\t\treturn {\n\t\t\t\tclearMsgModal:false,\n\t\t\t\tshowLogin:false,\n\t\t\t\tcurrentTab:0,\n\t\t\t\tmsgType:1,\n\t\t\t\ttabs:[\n\t\t\t\t\t{name:'全部'},\n\t\t\t\t\t{name:'打招呼'},\n\t\t\t\t\t{name:'沟通中'}\n\t\t\t\t],\n\t\t\t\tmescroll: null,\n\t\t\t\tupOption: {\n\t\t\t\t\tonScroll: true,\n\t\t\t\t\ttextNoMore: '',\n\t\t\t\t\tauto: false,\n\t\t\t\t\tnoMoreSize: 5,\n\t\t\t\t\tpage: {\n\t\t\t\t\t\tnum: 0,\n\t\t\t\t\t\tsize: 10 // 每页数据的数量,默认10\n\t\t\t\t\t},\n\t\t\t\t\tempty: {\n\t\t\t\t\t\tuse: false\n\t\t\t\t\t},\n\t\t\t\t\ttextLoading: '加载中...',\n\t\t\t\t\ttoTop: {\n\t\t\t\t\t\tsafearea: true,\n\t\t\t\t\t\tbottom: \"15%\"\n\t\t\t\t\t}\n\t\t\t\t},\n\t\t\t\tdownOption: {\n\t\t\t\t\tauto: false\n\t\t\t\t},\n\t\t\t\tconversationList:[],\n\t\t\t\tmsgList:[],\n\t\t\t\tunreadNum:0,//未读消息数量\n\t\t\t\tdeleteConversationModal:false,//删除会话弹窗\n\t\t\t\tsystemMsg:null,//通知消息\n\t\t\t\t\n\t\t\t}\n\t\t},\n\t\tcomputed:{\n\t\t\t...mapGetters(['getNavHeight','getNavTop','getIsLogin','isSDKReady'])\n\t\t},\n\t\twatch: {\n\t\t\tisSDKReady(val){ // 监听im初始化是否成功 获取会话\n\t\t\t\tif(val){\n\t\t\t\t\tthis.getConversationList()\n\t\t\t\t}\n\t\t\t}\n\t\t},\n\t\tcreated() {\n\t\t\tthis.isSDKReady && this.getConversationList()\n\t\t},\n\t\tmethods: {\n\t\t\t...mapActions(['selCommunicationList']),\n\t\t\tasync selCommunicationListFn(page){// 获取会话分类列表\n\t\t\t\ttry{\n\t\t\t\t\tlet data = {\n\t\t\t\t\t\tpageNum:page,\n\t\t\t\t\t\tpageSize:20,\n\t\t\t\t\t\ttype:this.msgType\n\t\t\t\t\t}\n\t\t\t\t\tlet res = await this.selCommunicationList(data)\n\t\t\t\t\tif(res.code == 200){\n\t\t\t\t\t\tlet list = res.data\n\t\t\t\t\t\tconst hasNext = list.length > 19\n\t\t\t\t\t\t// console.log(list,'------------')\n\t\t\t\t\t\tconst originatorUserId = list.map(item => item.originatorUserId)\n\t\t\t\t\t\tlet conversationList =  JSON.parse(JSON.stringify(this.conversationList))\n\t\t\t\t\t\t// console.log(conversationList,originatorUserId)\n\t\t\t\t\t\tconst conversations = []\n\t\t\t\t\t\toriginatorUserId.forEach(user =>  {\n\t\t\t\t\t\t\tlet userObj = conversationList.find(item => {\n\t\t\t\t\t\t\t\treturn item.userProfile.userID == user\n\t\t\t\t\t\t\t})\n\t\t\t\t\t\t\tif(userObj){\n\t\t\t\t\t\t\t\tconversations.push(userObj)\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t})\n\t\t\t\t\t\t// console.log(conversations,'------------')\n\t\t\t\t\t\tthis.msgList = conversations\n\t\t\t\t\t\tthis.mescroll.endSuccess(list.length, hasNext);\n\t\t\t\t\t}\n\t\t\t\t}catch(e){\n\t\t\t\t\tthis.mescroll.endSuccess(this.msgList.length, true);\n\t\t\t\t\t//TODO handle the exception\n\t\t\t\t}\n\t\t\t},\n\t\t\tgetConversationList() { //  获取会话列表\n\t\t\t\tuni.$TUIKit.on(uni.$TUIKitEvent.CONVERSATION_LIST_UPDATED, this.onConversationListUpdated); // 监听会话更新\n\t\t\t\tuni.$TUIKit.getConversationList().then(imResponse => {  \n\t\t\t\t\tconsole.log(imResponse)\n\t\t\t\t\tconst converList = imResponse.data.conversationList\n\t\t\t\t\tconst hasNext = converList.length > 19\n\t\t\t\t\tthis.conversationList = converList.filter(item => item.conversationID != \"C2Cadministrator\")\n\t\t\t\t\tthis.msgList = this.conversationList\n\t\t\t\t\tlet num = 0;\n\t\t\t\t\tthis.msgList.forEach(item => {\n\t\t\t\t\t\tnum += item.unreadCount\n\t\t\t\t\t})\n\t\t\t\t\tthis.$store.commit('setUnreadNum',num)\n\t\t\t\t\tconsole.log(this.conversationList,'获取会话列表----------')\n\t\t\t\t\tthis.systemMsg = converList.find(item => item.conversationID == \"C2Cadministrator\") || null\n\t\t\t\t\t\n\t\t\t\t\tthis.mescroll.endSuccess(converList.length, hasNext);\n\t\t\t\t}).catch(()=>{\n\t\t\t\t\tthis.mescroll.endSuccess(this.conversationList.length, true);\n\t\t\t\t});\n\t\t\t},\n\t\t\tcustomClick(data){ // 会话列表操作\n\t\t\t\tconsole.log(data)\n\t\t\t\tif(data.index == 1){ // 删除当前会话\n\t\t\t\t\tthis.deleteConversationModal = true\n\t\t\t\t\tthis.deleteConversationID = data.conversationID\n\t\t\t\t} else { // 置顶\n\t\t\t\t\tthis.pinConversationFn(data)\n\t\t\t\t}\n\t\t\t},\n\t\t\tdeleteConversationFn() {\n\t\t\t\tuni.$TUIKit.deleteConversation(this.deleteConversationID).then(res => {\n\t\t\t\t\tthis.deleteConversationModal = false\n\t\t\t\t\tthis.deleteConversationID = ''\n\t\t\t\t\tthis.tui.toast('删除成功')\n\t\t\t\t\tthis.getConversationList()\n\t\t\t\t});\n\t\t\t},\n\t\t\tpinConversationFn(data){ // 置顶会话\n\t\t\t\tuni.$TUIKit.pinConversation({conversationID:data.conversationID,isPinned: !data.isPinned }).then(res => {\n\t\t\t\t\tconsole.log(res)\n\t\t\t\t\tif(!data.isPinned){\n\t\t\t\t\t\tthis.tui.toast('置顶成功')\n\t\t\t\t\t} else {\n\t\t\t\t\t\tthis.tui.toast('取消置顶')\n\t\t\t\t\t}\n\t\t\t\t});\n\t\t\t},\n\t\t\tonConversationListUpdated(event) { // 更新会话\n\t\t\t\t// console.log(event,'更新会话')\n\t\t\t\tthis.conversationList = event.data\n\t\t\t},\n\t\t\ttranMessage(lastMessage){//显示对应消息\n\t\t\t\tif(lastMessage.type == \"TIMCustomElem\"){\n\t\t\t\t\treturn lastMessage.payload.description\n\t\t\t\t} else {\n\t\t\t\t\treturn lastMessage.messageForShow\n\t\t\t\t}\n\t\t\t},\n\t\t\tchangeTab(e){\n\t\t\t\tthis.currentTab =  e.index\n\t\t\t\tthis.mescroll && this.mescroll.setPageNum(1)\n\t\t\t\tif(this.currentTab  == 1){\n\t\t\t\t\tthis.msgType  = 1 // 打招呼\n\t\t\t\t\tthis.selCommunicationListFn(1)\n\t\t\t\t} else if(this.currentTab  == 2) {\n\t\t\t\t\tthis.msgType  = 2 // 沟通中\n\t\t\t\t\tthis.selCommunicationListFn(1)\n\t\t\t\t} else {\n\t\t\t\t\tthis.msgList = JSON.parse(JSON.stringify(this.conversationList))\n\t\t\t\t}\n\t\t\t},\n\t\t\tcomfirmFn(){ // 清除未读消息\n\t\t\t\t// 将所有会话的未读消息全部设置为已读\n\t\t\t\tlet promise = uni.$TUIKit.setAllMessageRead(); // 等同于 tim.setAllMessageRead({scope: TIM.TYPES.READ_ALL_MSG})\n\t\t\t\tpromise.then((imResponse)=> {\n\t\t\t\t  // 已读上报成功，所有会话的 unreadCount 属性值被置为0\n\t\t\t\t  this.tui.toast('成功')\n\t\t\t\t  this.clearMsgModal = false\n\t\t\t\t}).catch((imError) =>{\n\t\t\t\t  // 已读上报失败\n\t\t\t\t  this.tui.toast(imError)\n\t\t\t\t  console.warn('setAllMessageRead error:', imError);\n\t\t\t\t});\n\t\t\t},\n\t\t\tmescrollInit(mescroll) {\n\t\t\t\tthis.mescroll = mescroll;\n\t\t\t},\n\t\t\tscrollFn(mescroll) {\n\t\t\t\tthis.scrollTop = mescroll.scrollTop\n\t\t\t},\n\t\t\tdownCallback() {\n\t\t\t\tsetTimeout(() => {\n\t\t\t\t\tthis.mescroll.resetUpScroll();\n\t\t\t\t}, 600);\n\t\t\t},\n\t\t\tupCallback(mescroll) { //上拉加载\n\t\t\t\tif(this.currentTab < 1) {\n\t\t\t\t\tthis.getConversationList()\n\t\t\t\t} else {\n\t\t\t\t\tthis.selCommunicationListFn(mescroll.num)\n\t\t\t\t}\n\t\t\t},\n\t\t\tnavToNotice(){\n\t\t\t\tuni.navigateTo({\n\t\t\t\t\turl:`/pagesB/notice/notice?conversationID=${this.systemMsg.conversationID}`\n\t\t\t\t})\n\t\t\t},\n\t\t\tnavToChat(item){\n\t\t\t\tconsole.log(item)\n\t\t\t\tuni.navigateTo({\n\t\t\t\t\turl:`/pagesB/chat/chat?userID=${item.userProfile.userID}`\n\t\t\t\t})\n\t\t\t},\n\t\t}\n\t}\n</script>\n\n<style lang=\"scss\">\n.msg-page{\n\t.msg-scroll{\n\t\theight: calc(100vh - 42px - 44px - var(--status-bar-height));\n\t}\n}\n\n</style>\n","import mod from \"-!../../../../../../../Applications/HBuilderX.app/Contents/HBuilderX/plugins/uniapp-cli/node_modules/mini-css-extract-plugin/dist/loader.js??ref--8-oneOf-1-0!../../../../../../../Applications/HBuilderX.app/Contents/HBuilderX/plugins/uniapp-cli/node_modules/css-loader/dist/cjs.js??ref--8-oneOf-1-1!../../../../../../../Applications/HBuilderX.app/Contents/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/vue-loader/lib/loaders/stylePostLoader.js!../../../../../../../Applications/HBuilderX.app/Contents/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/webpack-preprocess-loader/index.js??ref--8-oneOf-1-2!../../../../../../../Applications/HBuilderX.app/Contents/HBuilderX/plugins/uniapp-cli/node_modules/postcss-loader/src/index.js??ref--8-oneOf-1-3!../../../../../../../Applications/HBuilderX.app/Contents/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/sass-loader/dist/cjs.js??ref--8-oneOf-1-4!../../../../../../../Applications/HBuilderX.app/Contents/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/webpack-preprocess-loader/index.js??ref--8-oneOf-1-5!../../../../../../../Applications/HBuilderX.app/Contents/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/vue-loader/lib/index.js??vue-loader-options!../../../../../../../Applications/HBuilderX.app/Contents/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/webpack-uni-mp-loader/lib/style.js!./msg.vue?vue&type=style&index=0&lang=scss&\"; export default mod; export * from \"-!../../../../../../../Applications/HBuilderX.app/Contents/HBuilderX/plugins/uniapp-cli/node_modules/mini-css-extract-plugin/dist/loader.js??ref--8-oneOf-1-0!../../../../../../../Applications/HBuilderX.app/Contents/HBuilderX/plugins/uniapp-cli/node_modules/css-loader/dist/cjs.js??ref--8-oneOf-1-1!../../../../../../../Applications/HBuilderX.app/Contents/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/vue-loader/lib/loaders/stylePostLoader.js!../../../../../../../Applications/HBuilderX.app/Contents/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/webpack-preprocess-loader/index.js??ref--8-oneOf-1-2!../../../../../../../Applications/HBuilderX.app/Contents/HBuilderX/plugins/uniapp-cli/node_modules/postcss-loader/src/index.js??ref--8-oneOf-1-3!../../../../../../../Applications/HBuilderX.app/Contents/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/sass-loader/dist/cjs.js??ref--8-oneOf-1-4!../../../../../../../Applications/HBuilderX.app/Contents/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/webpack-preprocess-loader/index.js??ref--8-oneOf-1-5!../../../../../../../Applications/HBuilderX.app/Contents/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/vue-loader/lib/index.js??vue-loader-options!../../../../../../../Applications/HBuilderX.app/Contents/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/webpack-uni-mp-loader/lib/style.js!./msg.vue?vue&type=style&index=0&lang=scss&\"","// extracted by mini-css-extract-plugin\n    if(module.hot) {\n      // 1670916275563\n      var cssReload = require(\"/Applications/HBuilderX.app/Contents/HBuilderX/plugins/uniapp-cli/node_modules/mini-css-extract-plugin/dist/hmr/hotModuleReplacement.js\")(module.id, {\"hmr\":true,\"publicPath\":\"../../\",\"locals\":false});\n      module.hot.dispose(cssReload);\n      module.hot.accept(undefined, cssReload);\n    }\n  "],"sourceRoot":""}